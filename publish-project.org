# -*- org-confirm-babel-evaluate: nil; -*-
#+TITLE: How to Publish HTML5 Without all of the Default Styles and Javascript
#+HTML_HEAD: "<link rel='stylesheet' type='text/css' href='../css/org-mode.css'>"

* Raw code to tangle out
** Initialize the publishing properties
If a file does not export to HTML it can be because an of unset variable in a source block.

#+BEGIN_SRC emacs-lisp :results silent 
  (setq org-publish-project-alist '(("simple-publish" 
                                     :base-directory "."                           ; This file must be at the root of the org project.
                                     :base-extension "org"                         ; Only process org-mode files.
                                     :publishing-directory "./publish-html"
                                     :publishing-function org-html-publish-to-html
                                     :section-numbers nil
                                     :with-toc nil
                                     :html-extension "html"
                                     :html-head-include-scripts nil                ; Do not include the default javascript.
                                     :html-head-include-default-style nil          ; Do not include the default css styles.
                                     :html-html5-fancy t                           ; Supposedly this is required for HTML5 output.
                                     :html-doctype "html5"                         ; And yes, render out HTML5.
                                     :html-preamble nil
                                     :html-postamble nil
                                     :recursive t)))
#+END_SRC

** Clean and Build
"Org uses [[http://orgmode.org/guide/Publishing.html][timestamps]] to track when a file has changed. The above functions normally only publish changed files. You can override this and force publishing of all files by giving a prefix argument to any of the commands above."

This [[https://stackoverflow.com/questions/21258769/using-emacs-org-mode-how-to-publish-the-unchanged-files-in-a-project][post]] has an example of how to "force" a build.

#+BEGIN_SRC shell :results silent
  rm -fr ./publish-html/*
#+END_SRC

#+BEGIN_SRC emacs-lisp :results silent 
  (org-publish-current-project "simple-publish" nil) ; Rebuild files that have a fresh time stamp.
#+END_SRC

#+BEGIN_SRC emacs-lisp :results silent 
  (org-publish-current-project "simple-publish" t)   ; Rebuild all files even if the time stamps have not changed.
#+END_SRC
